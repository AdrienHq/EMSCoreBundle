{% extends '@EMSCore/base.html.twig' %}{% trans_default_domain 'EMSCoreBundle' %}

{% block title %}View the environment {{environment.name}}{% endblock %}
{% block pagetitle %}View the environment {{environment.name}}{% endblock %} 
{% block breadcrumb %}
	<ol class="breadcrumb">
		<li><a href={{ path('environment.index') }}><i class="fa fa-database"></i> Environments</a></li>
   		<li class="active">View environment</li>
   	</ol>
{% endblock %}

{% block body %}

<div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">Elasticsearch information</h3>
            </div>
            <!-- /.box-header -->
            <!-- form start -->
            <form role="form">
              <div class="box-body">
                  {% if info %}
                      <pre class="ems-code-editor" data-language="ace/mode/json"
                           data-them="ace/theme/chrome">{{ info|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
					{% else %}
						Elasticsearch index is missing !
					{% endif %}
              </div>
              <!-- /.box-body -->

              <div class="box-footer">
                <div class="btn-group pull-right">
                    {% include '@EMSCore/elements/get-button.html.twig' with {
						'url': path('environment.index'),
						'label': 'Close',
						'icon': 'close'
					}%}
                    {% include '@EMSCore/elements/get-button.html.twig' with {
							'url': path('environment.edit', {'id': environment.id}),
							'label': 'Edit',
							'icon': 'pencil'
						}%}
				</div>
              </div>
            </form>
          </div>

{% endblock %}



{% block javascripts %}

    <script src="{{ asset('bundles/emscore/bower/ace-builds/src-min-noconflict/ace.js') }}"></script>

    <script type="text/javascript">
        $(window).ready(function () {
            $(".ems-code-editor").each(function () {
                var editor = ace.edit(this);
                if ($(this).data('theme')) {
                    editor.setTheme($(this).data('theme'));
                }
                if ($(this).data('language')) {
                    editor.session.setMode($(this).data('language'));
                }
                var maxLines = 500;
                if ($(this).data('max-lines') && $(this).data('max-lines') > 0) {
                    maxLines = $(this).data('max-lines');
                }
                editor.setOptions({
                    readOnly: true,
                    highlightActiveLine: false,
                    highlightGutterLine: false,
                    maxLines: maxLines
                });
                editor.renderer.$cursorLayer.element.style.opacity = 0;
                editor.textInput.getElement().tabIndex = -1;
                editor.commands.commmandKeyBinding = {};
            });
        });
    </script>

{% endblock %}