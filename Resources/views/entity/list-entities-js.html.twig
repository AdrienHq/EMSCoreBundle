
<script type="text/javascript" src="{{ asset('bundles/emscore/bower/nestedSortable/jquery.mjs.nestedSortable.js') }}"></script>
<script type="text/javascript">

    $(document).ready(function(){
    	$('.sortable').nestedSortable({
    		forcePlaceholderSize: true,
    		handle: 'div',
    		helper:	'clone',
    		items: 'li',
    		opacity: .6,
    		placeholder: 'placeholder',
    		revert: 250,
    		tabSize: 25,
    		tolerance: 'pointer',
    		toleranceElement: '> div',
    		maxLevels: 1,
    		expression: /()(.+)/,
    
    		isTree: false,
    		expandOnHover: 700,
    		startCollapsed: true
    	});

    	$('.reorder-button').click(function(e){
    		hiered = $(this).closest('.entity-box').find('ol.sortable').nestedSortable('toHierarchy', {startDepthCount: 0});

    		
    		var output = [];
			for (var item in hiered){
				output.push(hiered[item].id);
			}
    		
    		$('.reorder-items').val(JSON.stringify(output)).trigger("change");
    	})
    	
    });

</script>